import{r as k,C,d as I,j as e}from"./index-D93vVwhB.js";import{f as r}from"./exportUtils-JZTId_Jh.js";const w=()=>{const{companyData:D}=k.useContext(C),{startDate:d,endDate:l}=I(),{ledgers:c,vouchers:x}=D,h=k.useMemo(()=>{const a=c.filter(t=>t.group==="Bank Accounts"||t.group==="Bank OD A/c"),p=new Set(a.map(t=>t.id)),o=new Map(c.map(t=>[t.id,t])),y=new Date(d),u=new Date(l);u.setHours(23,59,59,999);const g=[];return x.forEach(t=>{var N,f,b;const n=new Date(t.date);if(n<y||n>u)return;const s=t.entries.find(i=>p.has(i.ledgerId));if(s){const i=/(?:cheque|chq|cheq)\.?,?\s?no\.?:?\s?(\d+)/i,j=t.narration.match(i);if(j){const m=t.entries.find(q=>!p.has(q.ledgerId));g.push({id:t.id,date:t.date,bankName:((N=o.get(s.ledgerId))==null?void 0:N.bankName)||((f=o.get(s.ledgerId))==null?void 0:f.name),partyName:(b=o.get((m==null?void 0:m.ledgerId)||""))==null?void 0:b.name,chequeNo:j[1],amount:s.amount,type:s.type==="Dr"?"Payment":"Receipt",status:s.reconciliationDate?`Cleared on ${r(s.reconciliationDate)}`:"Pending"})}}}),g.sort((t,n)=>new Date(n.date).getTime()-new Date(t.date).getTime())},[c,x,d,l]);return e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Cheque Register"}),e.jsxs("p",{className:"text-lg text-slate-500 dark:text-slate-400 mb-6",children:["For the period from ",r(d)," to ",r(l)]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-left text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-medium",children:"Date"}),e.jsx("th",{className:"p-3 font-medium",children:"Bank Name"}),e.jsx("th",{className:"p-3 font-medium",children:"Party Name"}),e.jsx("th",{className:"p-3 font-medium",children:"Cheque No."}),e.jsx("th",{className:"p-3 font-medium text-right",children:"Amount"}),e.jsx("th",{className:"p-3 font-medium",children:"Type"}),e.jsx("th",{className:"p-3 font-medium",children:"Status"})]})}),e.jsx("tbody",{children:h.length>0?h.map(a=>e.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-3",children:r(a.date)}),e.jsx("td",{className:"p-3 text-slate-800 dark:text-slate-200",children:a.bankName}),e.jsx("td",{className:"p-3 font-semibold text-slate-800 dark:text-slate-200",children:a.partyName}),e.jsx("td",{className:"p-3 font-mono",children:a.chequeNo}),e.jsx("td",{className:"p-3 text-right font-mono",children:a.amount.toFixed(2)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.type==="Payment"?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}`,children:a.type})}),e.jsx("td",{className:"p-3",children:a.status})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center p-10 text-slate-500 dark:text-slate-400",children:"No cheque transactions found in narration for this period."})})})]})})})]})};export{w as default};
