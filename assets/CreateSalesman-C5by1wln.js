import{r as n,C as I,b as T,c as M,j as e,B as j,m as q,n as B,E as L,o as A,p as R}from"./index-D93vVwhB.js";import{I as o}from"./Input-C3iYqBmf.js";const $=()=>{const h=n.useContext(I),{addNotification:b}=T(),{showModal:N,hideModal:u}=M(),g={name:"",contactNo:"",email:""},[l,d]=n.useState(g),[s,c]=n.useState(null),[i,p]=n.useState("");if(n.useEffect(()=>{d(s||g)},[s]),!h)return null;const{companyData:t,addSalesman:v,editSalesman:S,deleteSalesman:C}=h,m=n.useMemo(()=>t!=null&&t.salesmen?i?t.salesmen.filter(a=>a.name.toLowerCase().includes(i.toLowerCase())):t.salesmen:[],[t==null?void 0:t.salesmen,i]),x=a=>{const{name:r,value:E}=a.target;d(D=>({...D,[r]:E}))},k=a=>{if(a.preventDefault(),!l.name){b("Salesman Name is required.","error");return}let r=!1;s?r=S(s.id,l):r=!!v(l),r&&c(null)},w=a=>{c(a),window.scrollTo(0,0)},f=()=>{c(null)},y=a=>{N(e.jsx(R,{title:"Delete Salesman",message:`Are you sure you want to delete "${a.name}"?`,onConfirm:()=>{(s==null?void 0:s.id)===a.id&&f(),C(a.id),u()},onCancel:u,confirmText:"Delete",confirmVariant:"danger"}))};return e.jsxs("div",{className:"container mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:s?"Edit Salesman":"Create Salesman"}),e.jsxs("form",{onSubmit:k,className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 space-y-6",children:[e.jsx(o,{label:"Salesman Name",id:"name",name:"name",value:l.name,onChange:x,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{label:"Contact No.",id:"contactNo",name:"contactNo",value:l.contactNo||"",onChange:x}),e.jsx(o,{label:"Email ID",id:"email",name:"email",type:"email",value:l.email||"",onChange:x})]}),e.jsxs("div",{className:"flex justify-end items-center pt-4 gap-4",children:[s&&e.jsx(j,{type:"button",variant:"secondary",onClick:f,children:"Cancel"}),e.jsxs(j,{type:"submit",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),s?"Update Salesman":"Save Salesman"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Existing Salesmen"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(o,{label:"",id:"search-salesman",type:"text",placeholder:"Search...",value:i,onChange:a=>p(a.target.value),className:"!pl-10 w-full"}),e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 max-h-[55vh] overflow-y-auto",children:m&&m.length>0?e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:m.map(a=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:a.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>w(a),title:"Edit Salesman",className:"p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-sky-500 dark:hover:text-sky-400 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(a),title:"Delete Salesman",className:"p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]})]},a.id))}):e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No salesmen found."})})]})]})};export{$ as default};
