import{u as w,r as c,C as D,b as k,j as e,S as u,B as f}from"./index-D93vVwhB.js";import{I as n}from"./Input-C3iYqBmf.js";import{T as E}from"./Textarea-DXj1psJj.js";import{T as N}from"./ToggleSwitch-B0PxrSpv.js";import{C}from"./countries-xqPeZExq.js";const $=()=>{const b=w(),g=c.useContext(D),{addNotification:m}=k(),[o,d]=c.useState({}),y=c.useMemo(()=>{const a=new Date().getFullYear(),t=[];for(let r=2;r>=-2;r--){const i=a-r,I=i+1,v=`${i}-${I.toString().slice(2)}`;t.push({value:v,label:`F.Y. ${v}`})}return t},[]),[l,x]=c.useState({name:"",address:"",country:"India",state:"",pincode:"",email:"",phone:"",financialYear:y[2].value,currencySymbol:"â‚¹",companyType:"",gstApplicable:!1,gstNo:"",tdsApplicable:!1,prevYearTurnover:"",panNo:"",upiId:""}),j=c.useMemo(()=>C.map(a=>({value:a.name,label:a.name})),[]),S=c.useMemo(()=>{const a=C.find(t=>t.name===l.country);return a?[{value:"",label:"Select State"},...a.states.map(t=>({value:t.name,label:t.name}))]:[{value:"",label:"Select State"}]},[l.country]);if(!g)return null;const{createNewCompany:T}=g,A=a=>{a&&!/\S+@\S+\.\S+/.test(a)?d(t=>({...t,email:"Invalid email format."})):d(t=>({...t,email:void 0}))},Y=a=>{a&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(a)?d(t=>({...t,gstNo:"Invalid format. Must be a 15-character alphanumeric string."})):d(t=>({...t,gstNo:void 0}))},s=a=>{const{name:t,value:r}=a.target;t==="email"&&A(r),t==="gstNo"&&Y(r.toUpperCase()),x(i=>({...i,[t]:r}))},p=(a,t)=>{x(r=>{const i={...r,[a]:t};return a==="country"&&(i.state=""),i})},h=(a,t)=>{x(r=>({...r,[a]:t}))},q=a=>{a.preventDefault();const t=["name","address","country","state","pincode","email","phone","financialYear","currencySymbol","companyType","prevYearTurnover"];for(const r of t)if(!l[r]){m(`Please fill out the '${r}' field.`,"error");return}if(l.gstApplicable&&!l.gstNo){m("GST No. is required when GST is applicable.","error");return}if(o.email||o.gstNo){m("Please fix the errors before submitting.","error");return}T(l),b("/")},P=[{value:"",label:"Select Type"},{value:"Private",label:"Private Ltd."},{value:"Public",label:"Public Ltd."},{value:"Proprietor",label:"Proprietorship"},{value:"LLP",label:"LLP"},{value:"Firm",label:"Firm"}];return e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-4xl w-full space-y-8 bg-white dark:bg-slate-800 p-8 md:p-10 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-center text-3xl font-extrabold text-slate-900 dark:text-slate-100",children:"Create a New Company"}),e.jsx("p",{className:"mt-2 text-center text-sm text-slate-600 dark:text-slate-400",children:"Enter the details to get started. All fields are required."})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:q,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{label:"Company Name",id:"name",name:"name",type:"text",value:l.name,onChange:s,required:!0}),e.jsx(E,{label:"Address",id:"address",name:"address",value:l.address,onChange:s,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Country",id:"country",value:l.country,onChange:a=>p("country",a),options:j,required:!0}),e.jsx(u,{label:"State",id:"state",value:l.state,onChange:a=>p("state",a),options:S,required:!0})]}),e.jsx(n,{label:"Pincode",id:"pincode",name:"pincode",type:"text",value:l.pincode,onChange:s,required:!0}),e.jsxs("div",{children:[e.jsx(n,{label:"Email ID",id:"email",name:"email",type:"email",value:l.email,onChange:s,required:!0}),o.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),e.jsx(n,{label:"Phone No.",id:"phone",name:"phone",type:"text",value:l.phone,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(u,{label:"Company Type",id:"companyType",value:l.companyType,onChange:a=>p("companyType",a),options:P,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Currency Symbol",id:"currencySymbol",name:"currencySymbol",type:"text",value:l.currencySymbol,onChange:s,required:!0}),e.jsx(u,{label:"Financial Year",id:"financialYear",value:l.financialYear,onChange:a=>p("financialYear",a),options:y,required:!0})]}),e.jsx(n,{label:"Turnover in Previous Year",id:"prevYearTurnover",name:"prevYearTurnover",type:"number",value:l.prevYearTurnover,onChange:s,required:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{label:"GST Applicable",id:"gstApplicable",enabled:l.gstApplicable,onChange:a=>h("gstApplicable",a)}),l.gstApplicable&&e.jsxs("div",{children:[e.jsx(n,{label:"GST No.",id:"gstNo",name:"gstNo",type:"text",value:l.gstNo,onChange:s,placeholder:"e.g. 29ABCDE1234F1Z5",required:l.gstApplicable}),o.gstNo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.gstNo})]}),e.jsx(N,{label:"TDS Applicable",id:"tdsApplicable",enabled:l.tdsApplicable,onChange:a=>h("tdsApplicable",a)})]}),e.jsx(n,{label:"PAN No.",id:"panNo",name:"panNo",type:"text",value:l.panNo,onChange:s}),e.jsx(n,{label:"UPI ID",id:"upiId",name:"upiId",type:"text",value:l.upiId,onChange:s,placeholder:"e.g. yourname@bank"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 pt-4",children:[e.jsx(f,{type:"button",variant:"secondary",onClick:()=>b("/welcome"),children:"Back"}),e.jsx(f,{type:"submit",children:"Create Company"})]})]})]})})};export{$ as default};
