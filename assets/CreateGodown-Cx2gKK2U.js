import{r as l,C as D,b as I,c as L,j as e,B as g,m as T,n as M,E as q,o as B,p as A}from"./index-D93vVwhB.js";import{I as x}from"./Input-C3iYqBmf.js";const U=()=>{const m=l.useContext(D),{addNotification:j}=I(),{showModal:b,hideModal:h}=L(),u={name:"",location:""},[n,d]=l.useState(u),[s,i]=l.useState(null),[r,p]=l.useState("");if(l.useEffect(()=>{d(s||u)},[s]),!m)return null;const{companyData:a,addGodown:v,editGodown:N,deleteGodown:C}=m,c=l.useMemo(()=>a!=null&&a.godowns?r?a.godowns.filter(t=>{var o;return t.name.toLowerCase().includes(r.toLowerCase())||((o=t.location)==null?void 0:o.toLowerCase().includes(r.toLowerCase()))}):a.godowns:[],[a==null?void 0:a.godowns,r]),w=t=>{const{name:o,value:E}=t.target;d(S=>({...S,[o]:E}))},k=t=>{if(t.preventDefault(),!n.name){j("Godown Name is required.","error");return}let o=!1;s?o=N(s.id,n):o=!!v(n),o&&i(null)},G=t=>{i(t),window.scrollTo(0,0)},f=()=>{i(null)},y=t=>{b(e.jsx(A,{title:"Delete Godown",message:`Are you sure you want to delete "${t.name}"?`,onConfirm:()=>{(s==null?void 0:s.id)===t.id&&f(),C(t.id),h()},onCancel:h,confirmText:"Delete",confirmVariant:"danger"}))};return e.jsxs("div",{className:"container mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:s?"Edit Godown":"Create Godown"}),e.jsxs("form",{onSubmit:k,className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(x,{label:"Godown Name",id:"name",name:"name",value:n.name,onChange:w,required:!0}),e.jsx(x,{label:"Location (Optional)",id:"location",name:"location",value:n.location||"",onChange:w})]}),e.jsxs("div",{className:"flex justify-end items-center pt-4 gap-4",children:[s&&e.jsx(g,{type:"button",variant:"secondary",onClick:f,children:"Cancel"}),e.jsxs(g,{type:"submit",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),s?"Update Godown":"Save Godown"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Existing Godowns"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(x,{label:"",id:"search-godown",type:"text",placeholder:"Search...",value:r,onChange:t=>p(t.target.value),className:"!pl-10 w-full"}),e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 max-h-[55vh] overflow-y-auto",children:c&&c.length>0?e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:c.map(t=>e.jsxs("li",{className:"py-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:t.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.location})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>G(t),title:"Edit Godown",className:"p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-sky-500 dark:hover:text-sky-400 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(t),title:"Delete Godown",className:"p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(B,{className:"w-5 h-5"})})]})]},t.id))}):e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No godowns found."})})]})]})};export{U as default};
