import{r as c,C as D,j as a,S as m,B as I,m as E}from"./index-D93vVwhB.js";import{I as o}from"./Input-C3iYqBmf.js";import{T as L}from"./Textarea-DXj1psJj.js";import{T as v}from"./ToggleSwitch-B0PxrSpv.js";import{C as h}from"./countries-xqPeZExq.js";const $=()=>{const u=c.useContext(D);if(!u||!u.companyData)return a.jsx("div",{children:"Loading company data..."});const{companyData:y,updateCompanyDetails:j}=u,[l,x]=c.useState(y.details),[i,d]=c.useState({}),C=c.useMemo(()=>{const e=new Date().getFullYear(),t=[];for(let s=5;s>=-5;s--){const r=e-s,Y=r+1,b=`${r}-${Y.toString().slice(2)}`;t.push({value:b,label:`F.Y. ${b}`})}return t},[]),f=c.useMemo(()=>h.map(e=>({value:e.name,label:e.name})),[]),N=c.useMemo(()=>{const e=h.find(t=>t.name===l.country);return e?[{value:"",label:"Select State"},...e.states.map(t=>({value:t.name,label:t.name}))]:[{value:"",label:"Select State"}]},[l.country]),S=e=>{e&&!/\S+@\S+\.\S+/.test(e)?d(t=>({...t,email:"Invalid email format."})):d(t=>({...t,email:void 0}))},T=e=>{e&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(e)?d(t=>({...t,gstNo:"Invalid format. Must be a 15-character alphanumeric string."})):d(t=>({...t,gstNo:void 0}))},n=e=>{const{name:t,value:s}=e.target;t==="email"&&S(s),t==="gstNo"&&T(s.toUpperCase()),x(r=>({...r,[t]:s}))},p=(e,t)=>{x(s=>{const r={...s,[e]:t};return e==="country"&&(r.state=""),r})},g=(e,t)=>{x(s=>({...s,[e]:t}))},A=e=>{if(e.preventDefault(),i.email||i.gstNo){alert("Please fix the errors before submitting.");return}j(l)},P=[{value:"Private",label:"Private Ltd."},{value:"Public",label:"Public Ltd."},{value:"Proprietor",label:"Proprietorship"},{value:"LLP",label:"LLP"},{value:"Firm",label:"Firm"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Company Profile"}),a.jsxs("form",{className:"space-y-6",onSubmit:A,children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(o,{label:"Company Name",id:"name",name:"name",type:"text",value:l.name,onChange:n,required:!0}),a.jsx(L,{label:"Address",id:"address",name:"address",value:l.address,onChange:n}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(m,{label:"Country",id:"country",value:l.country,onChange:e=>p("country",e),options:f}),a.jsx(m,{label:"State",id:"state",value:l.state,onChange:e=>p("state",e),options:N})]}),a.jsx(o,{label:"Pincode",id:"pincode",name:"pincode",type:"text",value:l.pincode,onChange:n}),a.jsxs("div",{children:[a.jsx(o,{label:"Email ID",id:"email",name:"email",type:"email",value:l.email,onChange:n}),i.email&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.email})]}),a.jsx(o,{label:"Phone No.",id:"phone",name:"phone",type:"text",value:l.phone,onChange:n})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(m,{label:"Company Type",id:"companyType",value:l.companyType,onChange:e=>p("companyType",e),options:P}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(o,{label:"Currency Symbol",id:"currencySymbol",name:"currencySymbol",type:"text",value:l.currencySymbol,onChange:n}),a.jsx(m,{label:"Financial Year",id:"financialYear",value:l.financialYear,onChange:e=>p("financialYear",e),options:C,required:!0})]}),a.jsx(o,{label:"Turnover in Previous Year",id:"prevYearTurnover",name:"prevYearTurnover",type:"number",value:l.prevYearTurnover,onChange:n}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(v,{label:"GST Applicable",id:"gstApplicable",enabled:l.gstApplicable,onChange:e=>g("gstApplicable",e)}),l.gstApplicable&&a.jsxs("div",{children:[a.jsx(o,{label:"GST No.",id:"gstNo",name:"gstNo",type:"text",value:l.gstNo,onChange:n,placeholder:"e.g. 29ABCDE1234F1Z5"}),i.gstNo&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.gstNo})]}),a.jsx(v,{label:"TDS Applicable",id:"tdsApplicable",enabled:l.tdsApplicable,onChange:e=>g("tdsApplicable",e)})]}),a.jsx(o,{label:"PAN No.",id:"panNo",name:"panNo",type:"text",value:l.panNo||"",onChange:n}),a.jsx(o,{label:"UPI ID",id:"upiId",name:"upiId",type:"text",value:l.upiId||"",onChange:n,placeholder:"e.g. yourname@bank"})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200 dark:border-slate-700",children:a.jsxs(I,{type:"submit",children:[a.jsx(E,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})};export{$ as default};
