import{r,C as u,j as e,n as h}from"./index-D93vVwhB.js";import{I as p}from"./Input-C3iYqBmf.js";const j=()=>{const{companyData:o}=r.useContext(u),{auditLogs:l=[],users:n=[]}=o,[a,i]=r.useState(""),d=r.useMemo(()=>new Map(n.map(t=>[t.id,t.name])),[n]),c=r.useMemo(()=>{if(!a)return l;const t=a.toLowerCase();return l.filter(s=>s.action.toLowerCase().includes(t)||s.entity.toLowerCase().includes(t)||s.details.toLowerCase().includes(t)||(d.get(s.userId)||"System").toLowerCase().includes(t))},[l,a,d]),x=t=>{const s=new Date(t);return`${s.toLocaleDateString()} ${s.toLocaleTimeString()}`},m=t=>{switch(t){case"Create":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"Update":return"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300";case"Delete":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";default:return"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"}};return e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Audit Trail"}),e.jsxs("div",{className:"relative w-full md:w-72",children:[e.jsx(p,{label:"",id:"search-audit",type:"text",placeholder:"Search logs...",value:a,onChange:t=>i(t.target.value),className:"!pl-10"}),e.jsx(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-left text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-medium",children:"Timestamp"}),e.jsx("th",{className:"p-3 font-medium",children:"Action"}),e.jsx("th",{className:"p-3 font-medium",children:"Entity"}),e.jsx("th",{className:"p-3 font-medium",children:"Details"}),e.jsx("th",{className:"p-3 font-medium",children:"User"})]})}),e.jsx("tbody",{children:c.length>0?c.map(t=>e.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-3 font-mono text-slate-600 dark:text-slate-400",children:x(t.timestamp)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m(t.action)}`,children:t.action})}),e.jsx("td",{className:"p-3 font-medium text-slate-700 dark:text-slate-300",children:t.entity}),e.jsx("td",{className:"p-3 text-slate-800 dark:text-slate-200",children:t.details}),e.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",children:d.get(t.userId)||t.userId})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-10 text-slate-500 dark:text-slate-400",children:"No logs found."})})})]})})})]})};export{j as default};
