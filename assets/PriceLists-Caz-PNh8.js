import{r as i,C as I,b as D,c as $,j as e,B as m,a as E,o as M,m as B,p as F}from"./index-D93vVwhB.js";import{I as g}from"./Input-C3iYqBmf.js";const A=()=>{const n=i.useContext(I),{addNotification:j}=D(),{showModal:N,hideModal:x}=$();if(!n||!n.companyData)return null;const{companyData:f,addPriceList:p,editPriceList:v,deletePriceList:k}=n,{priceLists:C,stockItems:h}=f,[t,d]=i.useState(null),[o,u]=i.useState(""),[b,r]=i.useState({}),y=s=>{d(s);const a=Object.fromEntries(h.map(l=>[l.id,s.itemRates[l.id]||""]));r(a)},w=()=>{if(!o.trim()){j("Price List name cannot be empty.","error");return}p({name:o,itemRates:{}}),u("")},P=s=>{N(e.jsx(F,{title:"Delete Price List",message:`Are you sure you want to delete "${s.name}"? This cannot be undone.`,onConfirm:()=>{k(s.id),(t==null?void 0:t.id)===s.id&&(d(null),r({})),x()},onCancel:x,confirmVariant:"danger"}))},S=(s,a)=>{r(l=>({...l,[s]:a}))},L=()=>{if(!t)return;const s={};for(const[a,l]of Object.entries(b)){const c=parseFloat(String(l));!isNaN(c)&&c>0&&(s[a]=c)}v(t.id,{...t,itemRates:s})},R=()=>{d(null),r({})};return e.jsxs("div",{className:"container mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6",children:"Price Lists"}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{label:"",id:"new-price-list",placeholder:"New Price List Name",value:o,onChange:s=>u(s.target.value)}),e.jsx(m,{onClick:w,className:"!p-2.5",children:e.jsx(E,{className:"w-5 h-5"})})]}),e.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700 max-h-[60vh] overflow-y-auto",children:C.map(s=>e.jsxs("li",{className:`p-3 flex justify-between items-center rounded-md transition-colors ${(t==null?void 0:t.id)===s.id?"bg-sky-100 dark:bg-sky-900/50":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[e.jsx("button",{className:"text-left flex-grow",onClick:()=>y(s),children:e.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:s.name})}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{onClick:()=>P(s),title:"Delete",className:"p-2 rounded-md text-slate-500 dark:text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:e.jsx(M,{className:"w-5 h-5"})})})]},s.id))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:t?e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:t.name}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Set custom rates for stock items."})]}),e.jsx(m,{variant:"secondary",onClick:R,children:"Close"})]}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:h.map(s=>e.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center",children:[e.jsxs("label",{htmlFor:`rate-${s.id}`,className:"col-span-3 text-sm font-medium text-slate-700 dark:text-slate-300",children:[s.name," ",e.jsxs("span",{className:"text-xs text-slate-400",children:["(",s.unit,")"]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(g,{label:"",id:`rate-${s.id}`,type:"text",placeholder:"Default Rate",value:b[s.id]??"",onChange:a=>S(s.id,a.target.value),className:"text-right"})})]},s.id))}),e.jsx("div",{className:"flex justify-end pt-6 mt-6 border-t border-slate-200 dark:border-slate-700",children:e.jsxs(m,{onClick:L,children:[e.jsx(B,{className:"w-5 h-5 mr-2"})," Save Changes"]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full bg-slate-100 dark:bg-slate-800/50 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700",children:e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Select a Price List to edit its rates."})})})]})};export{A as default};
