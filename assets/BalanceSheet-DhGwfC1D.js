import{r as g,C as w,d as k,j as t,B as D,t as S,H as v}from"./index-D93vVwhB.js";import{c as y,b as C,g as R}from"./accounting-tZ5hxOR_.js";import{b as B}from"./pdfGenerator-BheaZc2-.js";import{f as P}from"./exportUtils-JZTId_Jh.js";const p=({item:a,level:o,isExpanded:d,onToggle:h,currencySymbol:c})=>{var f,b;const s=a.children&&a.children.length>0||a.ledgers&&a.ledgers.length>0,i=o===0,m=o===1,r={paddingLeft:`${o*1.5}rem`};return t.jsxs(t.Fragment,{children:[t.jsxs("tr",{className:`border-b border-slate-200 dark:border-slate-700/50 ${i?"bg-slate-100 dark:bg-slate-900/50":"hover:bg-slate-50 dark:hover:bg-slate-700/30"}`,children:[t.jsx("td",{className:`p-3 ${i?"font-extrabold text-slate-800 dark:text-slate-100":"text-slate-700 dark:text-slate-300"} ${m?"font-bold":""}`,style:r,children:t.jsxs("button",{onClick:()=>s&&h(a.id),className:"flex items-center gap-2 text-left",disabled:!s,children:[s&&t.jsx(v,{className:`w-4 h-4 transition-transform ${d?"rotate-90":""}`}),!s&&t.jsx("div",{className:"w-4 h-4"}),a.title]})}),t.jsxs("td",{className:`p-3 text-right font-mono ${i?"font-extrabold text-slate-800 dark:text-slate-100":"text-slate-700 dark:text-slate-300"} ${m?"font-bold":""}`,children:[c," ",Math.abs(a.total).toFixed(2)]})]}),d&&s&&t.jsxs(t.Fragment,{children:[(f=a.children)==null?void 0:f.map(e=>t.jsx(p,{item:e,level:o+1,isExpanded:d,onToggle:h,currencySymbol:c},e.id)),(b=a.ledgers)==null?void 0:b.map(e=>t.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700/50 hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[t.jsx("td",{className:"p-3 text-slate-600 dark:text-slate-400",style:{paddingLeft:`${(o+2)*1.5}rem`},children:e.name}),t.jsxs("td",{className:"p-3 text-right font-mono text-slate-600 dark:text-slate-400",children:[c," ",Math.abs(e.balance).toFixed(2)]})]},e.id))]})]})},A=()=>{const{companyData:a}=g.useContext(w),{startDate:o,endDate:d}=k(),[h,c]=g.useState(new Set),{ledgers:s=[],vouchers:i=[],details:m}=a,r=g.useMemo(()=>{if(!(s!=null&&s.length))return[];const{transactions:e,closingBalances:n}=y(s,i,o,d),{netProfit:l}=C(s,e);return R(s,n,l)},[s,i,o,d]);g.useEffect(()=>{const e=new Set;r.forEach(n=>{var l;e.add(n.id),(l=n.children)==null||l.forEach(j=>{e.add(j.id)})}),c(e)},[r]);const f=e=>{c(n=>{const l=new Set(n);return l.has(e)?l.delete(e):l.add(e),l})},b=()=>{var e,n;if(a&&r.length===2){const l=((e=r[0].children)==null?void 0:e.map(x=>({head:x.title,total:x.total})))||[],j=((n=r[1].children)==null?void 0:n.map(x=>({head:x.title,total:x.total})))||[],u=r[0].total,N=r[1].total;B(l,j,u,N,d,a)}};return t.jsxs("div",{className:"container mx-auto",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Balance Sheet (Schedule III)"}),t.jsxs("p",{className:"text-lg text-slate-500 dark:text-slate-400 font-normal",children:["as on ",P(d)]})]}),t.jsxs(D,{onClick:b,variant:"secondary",children:[t.jsx(S,{className:"w-5 h-5 mr-2"}),"Download PDF"]})]}),t.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"text-left text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-900/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 font-medium",children:"PARTICULARS"}),t.jsx("th",{className:"p-3 font-medium text-right",children:"AMOUNT"})]})}),t.jsx("tbody",{children:r.map(e=>t.jsx(p,{item:e,level:0,isExpanded:h.has(e.id),onToggle:f,currencySymbol:m.currencySymbol},e.id))})]})})})]})};export{A as default};
